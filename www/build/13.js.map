{"version":3,"sources":["../../src/pages/settings/change-password/change-password.module.ts","../../src/pages/settings/change-password/change-password.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChangePasswordPage } from './change-password';\n\n@NgModule({\n  declarations: [\n    ChangePasswordPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChangePasswordPage),\n  ],exports: [ChangePasswordPage]\n})\nexport class ChangePasswordModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/change-password/change-password.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { ToastServiceProvider } from '../../../providers/toast-service/toast-service';\nimport { AlertServiceProvider } from '../../../providers/alert-service/alert-service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n// import { Http, Response, Headers } from '@angular/http';\n// import {Observable} from 'rxjs/Rx'\nimport { Storage } from '@ionic/storage';\nimport { UserManager } from '../../../providers/WebServices/User/UserManager';\nimport { SharedTaskProvider } from '../../../providers/SharedTask/sharedtask'\nimport { AuthenticationPage } from '../../auth/authentication/authentication'\nimport { Keyboard } from '@ionic-native/keyboard';\n\n@IonicPage()\n@Component({\n  selector: 'page-change-password',\n  templateUrl: 'change-password.html',\n})\nexport class ChangePasswordPage {\n\n  public oldPass = 'password';\n  public newPass = 'password';\n  public repass = 'password';\n\n  public showPass: boolean = false;\n  public showPassNew: boolean = false;\n  public showRePass: boolean = false;\n\n  changePswdForm: FormGroup;\n  isSubmit: boolean = false;\n  // newPasword:any;\n  currentPassword: any;\n  confirmPassword: any;\n  newPasword: any;\n  cnfPassFalse: boolean = false;\n  // public headers: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    // public http: Http,\n    private fb: FormBuilder,\n    // private headers:Headers,\n    private storage: Storage,\n    public viewCtrl: ViewController,\n    public toastCtrl: ToastServiceProvider,\n    public alertService: AlertServiceProvider,\n    public userManager: UserManager,\n    private keyboard: Keyboard,\n    public sharedTaskProvider: SharedTaskProvider\n  ) {\n\n    this.createForm();\n  }\n\n  createForm() {\n    let PASS_REGEXP = \"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,25}$\";\n\n    this.changePswdForm = this.fb.group({\n      'currentPassword': [null, [Validators.required]],\n      'newPasword': [null, [Validators.required, Validators.minLength(1), Validators.maxLength(25), Validators.pattern(PASS_REGEXP)]],\n      'confirmPassword': [null, [Validators.required]]\n    })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ChangePasswordPage');\n  }\n\n  closeChangePassword() {\n    this.keyboard.close();\n    this.viewCtrl.dismiss();\n  }\n\n  showPassword() {\n    this.showPass = !this.showPass;\n\n    if (this.showPass) {\n      this.oldPass = 'text';\n    } else {\n      this.oldPass = 'password';\n    }\n  }\n\n\n  showPasswordNew() {\n    this.showPassNew = !this.showPassNew;\n\n    if (this.showPassNew) {\n      this.newPass = 'text';\n    } else {\n      this.newPass = 'password';\n    }\n  }\n\n  showRePassword() {\n    this.showRePass = !this.showRePass;\n\n    if (this.showRePass) {\n      this.repass = 'text';\n    } else {\n      this.repass = 'password';\n    }\n  }\n\n  confirmChangePassword() {\n\n  }\n\n  submitForm(formData) {\n\n    let flag: boolean = false;\n\n    console.log('Change Password');\n    console.log(formData);\n\n    this.isSubmit = true;\n\n    // console.log(formData.newPasword +\" == \"+ formData.confirmPassword);\n    if (formData.newPasword == formData.confirmPassword) {\n      // alert(\"Matched\")\n      this.cnfPassFalse = false;\n      flag = true;\n    } else {\n      // alert(\"Not Match\");\n      this.cnfPassFalse = true;\n    }\n\n    if (formData.currentPassword != null && flag == true && this.changePswdForm.valid) {\n      this.changePassword(formData);\n    }\n  }\n\n  changePassword(formData) {\n    this.storage.get(\"userData\").then((result) => {\n      if (result) {\n        formData.userId = result.userInfoModel.userId;\n        // //debugger;\n        this.userManager.changePassword(formData)\n          .then(data => {\n            //debugger;\n            // let message = data;\n            console.log('life story data =', data);\n\n            let profileObject: any;\n            profileObject = data;\n            if (profileObject.responseCode == '200') {\n              let message = profileObject.message;\n              this.sharedTaskProvider.showToastMessage(message);\n              // this.logoutTask();\n              \n              let updateUserData = {\n                \"token\": profileObject.data.token,\n                \"userInfoModel\":result.userInfoModel\n              }\n              console.log(\"===== updateUserData after change password ====\\n\\n\", updateUserData);\n              this.storage.set(\"userData\", updateUserData);\n              window.localStorage.setItem('token', profileObject.data.token);\n\n              this.closeChangePassword();\n            }\n\n          }, error => {\n            ////debugger;\n            console.log(error);\n          });\n      }\n    });\n  }\n\n\n  logoutTask() {\n    this.sharedTaskProvider.showToastMessage('You have been logged out of modUrn.')\n    this.sharedTaskProvider.setValueForKey(false, 'loginStatus');\n    this.sharedTaskProvider.setValueForKey('', 'userData');\n\n    this.navCtrl.setRoot(AuthenticationPage);\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/change-password/change-password.ts"],"sourceRoot":""}