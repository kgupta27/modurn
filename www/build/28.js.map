{"version":3,"sources":["../../src/pages/addstory/documents/documents.module.ts","../../src/pages/addstory/documents/documents.ts"],"names":[],"mappings":"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","file":"28.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DocumentsPage } from './documents';\n\n@NgModule({\n  declarations: [\n    DocumentsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DocumentsPage),\n  ],\n})\nexport class DocumentsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addstory/documents/documents.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { LifeStoryService } from '../../../providers/WebServices/LifeStory/LifeStoryService';\nimport { SharedTaskProvider } from '../../../providers/SharedTask/sharedtask';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\nimport { AlertServiceProvider } from '../../../providers/alert-service/alert-service';\n\n@IonicPage()\n@Component({\n  selector: 'page-documents',\n  templateUrl: 'documents.html',\n})\nexport class DocumentsPage {\n\n  ownerId: any;\n  urnType: any;\n  isProfile: boolean = true;\n  items: any = [];\n  errMsg: any = '';\n  documentData: any = {};\n  isDataFound: boolean = false;\n  role: any;\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public storage: Storage,\n    public lifeStoryService: LifeStoryService,\n    public sharedTaskProvider: SharedTaskProvider,\n    public actionSheetCtrl: ActionSheetController,\n    public inAppBrowser: InAppBrowser,\n    public alertServiceProvider: AlertServiceProvider, ) {\n\n    this.ownerId = navParams.data.ownerId;\n    this.urnType = navParams.data.urnType;\n    this.isProfile = navParams.data.isProfile;\n    this.role = navParams.data.role;\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad DocumentsPage');\n    if (this.isProfile) {\n      this.document();\n    }\n  }\n\n  document() {\n    this.storage.get(\"userData\").then((result) => {\n      console.log(\"result= \", result.userInfoModel);\n\n\n      var params = {\n        // 'page': '1',\n        'ownerId': this.ownerId,\n      };\n      console.log(\"params::\", params);\n      this.lifeStoryService.getPdfList(params)\n        .then((result: any) => {\n          //debugger;\n          if (result.data == null) {\n            this.isDataFound = true;\n            this.sharedTaskProvider.showToastMessage(\"No data found.\");\n            return false;\n          }\n          // data not null\n          if (result.data.length > 0) {\n            for (let i = 0; i < result.data.length; i++) {\n              const element = result.data[i];\n              this.items.push(element);\n            }\n            // var arr = Object.keys(result).map(function (k) { return result[k] });\n            //this.items = result.data;\n            console.log(this.items);\n            // this.items = this.documentData.contentList[0];\n          }\n\n        }, error => {\n\n          if (error == \"No internet connection.\") {\n            this.errMsg = \"Please check your internet connection and try again\";\n          } else {\n            this.errMsg = \"Something went wrong\";\n          }\n          console.log(error);\n        });\n    });\n  }\n\n  dismiss() {\n    this.navCtrl.pop();\n  }\n\n  presentActionSheet(pdfData, index) {\n    console.log(\"Index:: \", index);\n\n    if (this.role == 1 || this.role == 2) {\n\n      let actionSheet = this.actionSheetCtrl.create({\n\n        buttons: [\n          {\n            text: 'View',\n            handler: () => {\n              this.pdfViewer(pdfData.pdfFile);\n            }\n          },\n          {\n            text: 'Delete',\n            role: 'destructive',\n            handler: () => {\n              console.log('Deleting... ');\n              this.alertServiceProvider.presentLogOutAlert('Are you sure want to delete?').then((yes) => {\n                if (yes) {\n                  console.log(\"Yes\");\n                  this.deletePdf(pdfData.id, index);\n                } else {\n                  console.log(\"No\");\n                }\n              });\n            }\n          },\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            handler: () => {\n              console.log('Cancel clicked');\n            }\n          }\n        ]\n      });\n      actionSheet.present();\n\n    }\n    else{\n\n        let actionSheet = this.actionSheetCtrl.create({\n  \n          buttons: [\n            {\n              text: 'View',\n              handler: () => {\n                this.pdfViewer(pdfData.pdfFile);\n              }\n            },\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              handler: () => {\n                console.log('Cancel clicked');\n              }\n            }\n          ]\n        });\n        actionSheet.present();\n  \n      \n    }\n  }\n\n  pdfViewer(pdfLink) {\n    let newFileURL = \"http://docs.google.com/gview?url=\" + pdfLink + \"&embedded=true\";\n\n    try {\n      this.inAppBrowser.create(newFileURL, '_blank', 'location=yes');\n\n    }\n    catch (e) {\n      console.log(\"Invalid Url\");\n      // this.toastProvider.create(\"Invalid Url\");\n    }\n  }\n\n  deletePdf(pdfId, index) {\n    this.storage.get(\"userData\").then((result) => {\n      console.log(\"result= \", result.userInfoModel);\n\n\n      var params = {\n        'pdfId': pdfId,\n        'ownerId': this.ownerId,\n      };\n      console.log(\"params::\", params);\n      this.lifeStoryService.deletePdfFile(params)\n        .then(result => {\n          console.log(\"Success!\");\n          this.items.splice(index, 1);\n          if (this.items.length > 0) {\n            console.log(\"Array is not empty\");\n          } else {\n            console.log(\"Array is empty\");\n            this.isDataFound = true;\n          }\n        }, error => {\n\n          if (error == \"No internet connection.\") {\n            this.errMsg = \"Please check your internet connection and try again\";\n          } else {\n            this.errMsg = \"Something went wrong\";\n          }\n          console.log(error);\n        });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addstory/documents/documents.ts"],"sourceRoot":""}